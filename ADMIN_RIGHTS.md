# GudaZip 权限管理说明

## 🎯 解决UAC弹窗问题

**问题**：强制申请管理员权限会在启动时弹出UAC对话框，影响用户体验。

**解决方案**：提供**双模式启动**，让用户自主选择权限级别。

## 🏠 双模式运行

### 1. 普通模式（推荐）
- ✅ **快速启动**：无需UAC弹窗
- ✅ **日常使用**：适合压缩个人文件
- ❌ **功能限制**：无法访问系统保护文件

### 2. 管理员模式
- ⚠️ **需要UAC**：用户主动选择时才弹窗
- ✅ **完整功能**：可压缩系统文件
- ✅ **系统级操作**：适合系统备份和管理

## 🚀 启动方式

### 智能启动（推荐）
```bash
python main.py
```
- **首次运行**：显示权限选择对话框
- **后续运行**：按保存的偏好自动启动
- **用户友好**：只在用户主动选择时才申请UAC

### 强制管理员模式
```bash
start_as_admin.bat
```
或
```bash
python main.py --admin
```
- 跳过选择对话框，直接申请管理员权限

### 权限配置管理
```bash
python reset_permissions.py
```
- 重置用户的权限偏好设置
- 下次启动时重新显示选择对话框

## 🔧 权限选择对话框

首次运行或重置配置后会显示：

```
┌─────────────────────────────────────┐
│           选择运行模式               │
├─────────────────────────────────────┤
│                                     │
│  🏠 普通模式（推荐）                │
│  • 快速启动，无需UAC弹窗            │
│  • 适合日常文件压缩                 │
│  • 无法访问系统保护文件             │
│                                     │
│  🛡️ 管理员模式                     │
│  • 需要UAC权限确认                  │
│  • 可压缩系统文件                   │
│  • 适合系统备份和管理               │
│                                     │
│  ☑️ 记住我的选择，下次不再询问      │
│                                     │
└─────────────────────────────────────┘
```

## 💾 配置文件

用户选择会保存在 `.gudazip_config` 文件中：
- `normal` - 普通模式
- `admin` - 管理员模式

## 🔄 配置管理

### 查看当前配置
运行任何测试脚本都会显示当前配置状态

### 重置配置
```bash
python reset_permissions.py
```

### 临时使用不同模式
- 普通启动：`python main.py`（按配置启动）
- 强制管理员：`python main.py --admin`

## 🎁 用户体验改进

### 改进前 ❌
- 启动时强制弹出UAC
- 用户被迫选择"是"或"否"
- 每次启动都有中断

### 改进后 ✅
- 首次启动显示友好的选择界面
- 用户可以选择普通模式避免UAC
- 选择记住后无需重复选择
- 只在真正需要时才申请管理员权限

## 📋 使用建议

### 普通用户
推荐选择**普通模式**：
- 压缩个人文档、图片、视频等
- 快速启动，无打扰
- 满足日常压缩需求

### 系统管理员
可选择**管理员模式**：
- 压缩系统文件和程序
- 创建完整系统备份
- 处理受保护的目录

### 企业用户
- 可通过批处理脚本统一部署
- 管理员可预设权限配置
- 支持静默安装和配置

## 🔗 相关文件

- `main.py` - 主程序（智能权限选择）
- `start_as_admin.bat` - 强制管理员模式启动器
- `reset_permissions.py` - 权限配置重置工具
- `test_permission_choice.py` - 权限选择功能测试
- `.gudazip_config` - 用户权限偏好配置文件

---
**GudaZip Team** - 用户体验至上的系统级压缩解决方案 